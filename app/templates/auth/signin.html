{% extends 'auth/auth_base.html' %}
{% block doodle %}
<span class="doodle"><img
    src="https://ynab-evergreen-assets.youneedabudget.com/ynab-api-production/v1.71424/assets/doodle-login-3fb9c20adf6ee05781509bffc0aab493f980f6f01ef525da24ee5439cba9e15f.svg" /></span>
{% endblock %}

{% block authentication %}
<div class="authentications-container-item">
  <div>
    <h2>Log In</h2>
  </div>
  <div>
    <p>
      New to YNAB?
      <a data-switch-auth-to="signup" href="{{url_for('auth.sign_up')}}">Sign up today</a>.
    </p>
  </div>
  <span>
    <form id="login-form" method="post" accept-charset="UTF-8" class="form login-form" novalidate="novalidate">
      {{ form.csrf_token }}
      <input name="utf8" type="hidden" value="âœ“" />
      <p class="js-form-email">
        <label for="request_data_email" class="u-sr-only">Email:</label>
        {{form.email(autofocus="autofocus", spellcheck="false", placeholder="Email address", type="email", id="request_data_email", class="required valid", autocomplete="off")}}
        {% for error in form.email.errors %}
          <label for="request_data_email" class="error">{{error}}</label>
        {% endfor %}
      </p>
      <p class="js-form-password">
        <label for="request_data_password" class="u-sr-only">Password:</label>
        <span class="password-toggle">
          {{form.password(placeholder="Password", autocapitalize="none", autocomplete="off", type="password", id="request_data_password", class="required")}}
          <label>
            <input id="show_password" type="checkbox" data-password-toggle="" />Show</label></span>
          {% for error in form.password.errors %}
            <label for="request_data_password" class="error">{{error}}</label>
          {% endfor %}
      </p>
      <p class="remember-me-and-forgot-password">
          {{form.rememberme(type="checkbox", value="1", id="request_data_remember_me")}}{{ form.rememberme.label }}
        <a href="/users/password/new">Forgot password?</a>
      </p>
      <p></p>
      <div>
        <button name="login" type="submit" id="login" data-disable-with="Logging In..." class="button button-primary">
          Log In
        </button>
      </div>
    </form>
  </span>
</div>
{% endblock %}

{% block script %}

<script>
  const passField = document.querySelector("#request_data_password");
  const showBtn = document.querySelector("#show_password");
  showBtn.onclick = (()=>{
    if(passField.type === "password"){
      passField.type = "text";
      showBtn.classList.add("hide-btn");
    }else{
      passField.type = "password";
      showBtn.classList.remove("hide-btn");
    }
  });
</script>

{% endblock %}